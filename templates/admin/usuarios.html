
{% extends 'base.html' %}
{% block content %}
<h1>Usuarios (Solo Admin)</h1>

<section class="card">
  <h2>Crear usuario</h2>
  <form method="post" class="form">
    <input type="hidden" name="action" value="create">
    <label>Nombre <input name="name" required></label>
    <label>Email <input name="email" type="email" required></label>
    <label>Contrase√±a <input name="password" type="password" required></label>
    <label>Rol 
      <select name="role">
        <option value="teacher">teacher</option>
        <option value="admin">admin</option>
        <option value="student">student</option>
      </select>
    </label>
    <button class="btn">Crear</button>
  </form>
</section>

<section class="card">
  <h2>Listado</h2>
  <table style="width:100%; border-collapse: collapse;">
    <tr><th style="text-align:left;">Nombre</th><th>Email</th><th>Rol</th><th></th></tr>
    {% for u in users %}
      <tr>
        <td>{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.role }}</td>
        <td>
          <form method="post" style="display:inline;">
            <input type="hidden" name="action" value="changerole">
            <input type="hidden" name="user_id" value="{{ u.id }}">
            <select name="new_role">
              <option {% if u.role=='student' %}selected{% endif %}>student</option>
              <option {% if u.role=='teacher' %}selected{% endif %}>teacher</option>
              <option {% if u.role=='admin' %}selected{% endif %}>admin</option>
            </select>
            <button class="btn small">Actualizar</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </table>
</section>
{% endblock %}
